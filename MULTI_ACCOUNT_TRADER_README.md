# üöÄ Multi-Account Auto-Trader System

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –º–µ–∂–¥—É Gate.io –∏ Bybit P2P —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤, Gmail API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –∏ —É–º–Ω—ã–º —á–∞—Ç-–±–æ—Ç–æ–º.

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
- **Gate.io**: –•—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –≤ `db/gate/`
- **Bybit**: API –∫–ª—é—á–∏ –≤ `db/bybit/`
- **Gmail**: OAuth2 —Ç–æ–∫–µ–Ω—ã –≤ `db/gmail/`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–ª–∞–Ω—Å–∞ 10–ú RUB –∫–∞–∂–¥—ã–µ 4 —á–∞—Å–∞

### 2. –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º–∏
–¢—Ä—ë—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```
1. "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –û–ø–ª–∞—Ç–∞ –±—É–¥–µ—Ç —Å –¢ –±–∞–Ω–∫–∞? (–ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –¥–∞/–Ω–µ—Ç)"
   ‚Üí –ï—Å–ª–∏ "–Ω–µ—Ç" - –æ—Ç–∫–ª–æ–Ω—è–µ–º

2. "–ß–µ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ø–¥—Ñ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ—á—Ç—ã –¢ –±–∞–Ω–∫–∞ —Å–º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å? (–ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –¥–∞/–Ω–µ—Ç)"
   ‚Üí –ï—Å–ª–∏ "–Ω–µ—Ç" - –æ—Ç–∫–ª–æ–Ω—è–µ–º

3. "–ü—Ä–∏ –°–ë–ü, –µ—Å–ª–∏ –æ–ø–ª–∞—Ç–∞ –±—É–¥–µ—Ç –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–π –±–∞–Ω–∫, –¥–µ–Ω—å–≥–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã. (–ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é/–Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é)"
   ‚Üí –ï—Å–ª–∏ –Ω–µ "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é" - –æ—Ç–∫–ª–æ–Ω—è–µ–º
```

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.

### 3. Gmail API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- OAuth2 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∏—Å–µ–º –æ—Ç noreply@tinkoff.ru
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ PDF —á–µ–∫–æ–≤

### 4. WebSocket Admin API
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –°–æ–±—ã—Ç–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
python3 setup_trader.py

# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è:
# - –î–æ–±–∞–≤–ª–µ–Ω–∏—è Gate.io –∞–∫–∫–∞—É–Ω—Ç–æ–≤
# - –î–æ–±–∞–≤–ª–µ–Ω–∏—è Bybit –∞–∫–∫–∞—É–Ω—Ç–æ–≤
# - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Gmail API
# - –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ admin —Ç–æ–∫–µ–Ω–∞
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Gmail
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://console.cloud.google.com/
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –í–∫–ª—é—á–∏—Ç–µ Gmail API
4. –°–æ–∑–¥–∞–π—Ç–µ OAuth2 credentials (Desktop application)
5. –°–∫–∞—á–∞–π—Ç–µ credentials.json
6. –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ setup_trader.py

### 3. –ó–∞–ø—É—Å–∫
```bash
# –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
./start_auto_trader.sh

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
./start_auto_trader.sh --auto
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
db/
‚îú‚îÄ‚îÄ gate/
‚îÇ   ‚îú‚îÄ‚îÄ account_id1.json          # –î–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ account_id1_cookies.json  # Cookies —Å–µ—Å—Å–∏–∏
‚îú‚îÄ‚îÄ bybit/
‚îÇ   ‚îî‚îÄ‚îÄ account_id1.json          # API –∫–ª—é—á–∏
‚îú‚îÄ‚îÄ gmail/
‚îÇ   ‚îú‚îÄ‚îÄ credentials.json          # OAuth2 credentials
‚îÇ   ‚îî‚îÄ‚îÄ token.json                # Refresh token
‚îú‚îÄ‚îÄ transactions/
‚îÇ   ‚îî‚îÄ‚îÄ virtual_transactions.json # –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ checks/
‚îÇ   ‚îî‚îÄ‚îÄ CHECK_*.pdf               # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —á–µ–∫–∏
‚îî‚îÄ‚îÄ settings.json                 # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
```

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Gate.io
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∂–∏–¥–∞—é—â–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- Rate limiting: 240 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ Bybit
- –í—ã–±–æ—Ä —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (<2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π)
- –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –æ–ø–ª–∞—Ç—ã (–°–ë–ü/–¢–∏–Ω—å–∫–æ—Ñ—Ñ)
- –†–∞—Å—á–µ—Ç –∫—É—Ä—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Ä—ã–Ω–∫–∞

### 3. –ß–∞—Ç —Å –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–º
- –¢—Ä—ë—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ–∫–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Gmail –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è (noreply@tinkoff.ru)
- OCR –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—É–º–º—ã –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤

### 5. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏
- –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ Bybit
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ Gate.io
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ–∫–∞ –≤ –∞—Ä—Ö–∏–≤

## WebSocket Admin API

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```javascript
const ws = new WebSocket('ws://localhost:8765');

// –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
ws.send(JSON.stringify({
  command: "auth",
  token: "YOUR_ADMIN_TOKEN"
}));
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `get_accounts` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- `add_account` - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
- `remove_account` - –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
- `get_transactions` - –°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `approve_transaction` - –†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- `get_stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### –°–æ–±—ã—Ç–∏—è
- `new_transaction` - –ù–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
- `transaction_updated` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `chat_message` - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ
- `receipt_received` - –ü–æ–ª—É—á–µ–Ω —á–µ–∫

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### db/settings.json
```json
{
  "balance_update_interval": 14400,  // 4 —á–∞—Å–∞
  "gate_relogin_interval": 1800,     // 30 –º–∏–Ω—É—Ç
  "rate_limit_per_minute": 240,
  "admin_token": "your_token",
  "payment_methods": ["SBP", "Tinkoff"],
  "receipt_email": "your-receipts@gmail.com",
  "max_transactions_per_hour": 100,
  "cleanup_days": 30
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ø–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- Gmail –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OAuth2 (–Ω–µ –ø–∞—Ä–æ–ª–∏)
- Admin API –∑–∞—â–∏—â–µ–Ω —Ç–æ–∫–µ–Ω–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –ª–æ–≥–æ–≤
tail -f logs/trader_*.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep ERROR logs/trader_*.log
```

### –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
```bash
# –ß–µ—Ä–µ–∑ Admin API
wscat -c ws://localhost:8765
> {"command": "auth", "token": "YOUR_TOKEN"}
> {"command": "get_stats"}
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Gate.io –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –≤ db/gate/
- –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ cookies
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –≤—Ä—É—á–Ω—É—é –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å cookies

### Bybit –æ—à–∏–±–∫–∏ API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∞—Ö –Ω–∞ P2P trading
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–∏

### Gmail –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–µ—Ä–µ–∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å: —É–¥–∞–ª–∏—Ç–µ db/gmail/token.json
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials.json
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Gmail API –≤–∫–ª—é—á–µ–Ω

### OCR –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —á–µ–∫–∏
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Tesseract: `sudo apt-get install tesseract-ocr tesseract-ocr-rus`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç PDF —á–µ–∫–æ–≤
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ db/checks/

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `logs/`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Admin API –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `db/settings.json`
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!